<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Redis 版本信息"/><meta property="og:title" content="Redis 版本信息"/>
<meta property="og:description" content="Redis 版本信息"/>
<meta property="og:type" content="article"/>
<meta property="og:url" content="https://fencex.github.io/posts/redis/redis-version/"/>
<meta property="article:published_time" content="2020-01-02T00:00:00+00:00"/>
<meta property="article:modified_time" content="2020-01-02T00:00:00+00:00"/>
<title>Redis 版本信息 | fencex</title>
<link rel="icon" href="/favicon.png" type="image/x-icon"/>


<link rel="stylesheet" href="/book.min.edc993575be58655f3e49634e3ca6db09cc38ac9aa03ecdbe81d941636e35273.css" integrity="sha256-7cmTV1vlhlXz5JY048ptsJzDismqA+zb6B2UFjbjUnM="/>


<script defer="" src="/en.search.min.12b61cc248aa833b8f5d91855daef0daf707d98739545deeaebca21af60f4ecd.js" integrity="sha256-ErYcwkiqgzuPXZGFXa7w2vcH2Yc5VF3urryiGvYPTs0="></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control"/>
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>fencex</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/"/>
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>









  <ul>
<li><strong>组件</strong>
<ul>
<li><a href="/posts/redis/">Redis</a></li>
<li><a href="/posts/mysql/">Mysql</a></li>
</ul>
</li>
</ul>
<hr/>
<ul>
<li><strong>备忘</strong>
<ul>
<li><a href="/posts/cheatsheet/golang/">Golang</a></li>
</ul>
</li>
</ul>
<hr/>
<ul>
<li><strong>工具</strong>
<ul>
<li><a href="/posts/git/">Git</a></li>
<li><a href="/docs/shortcodes/buttons/">Buttons</a></li>
<li><a href="/docs/shortcodes/columns/">Columns</a></li>
<li><a href="/docs/shortcodes/expand/">Expand</a></li>
<li><a href="/docs/shortcodes/hints/">Hints</a></li>
<li><a href="/docs/shortcodes/katex/">Katex</a></li>
<li><a href="/docs/shortcodes/mermaid/">Mermaid</a></li>
<li><a href="/docs/shortcodes/tabs/">Tabs</a></li>
</ul>
</li>
</ul>
<hr/>
<ul>
<li>
<p><a href="/posts/"><strong>随笔</strong></a></p>
</li>
<li>
<p><a href="/posts/about-me/"><strong>关于我</strong></a></p>
</li>
</ul>
<hr/>








</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu"/>
  </label>

  <strong>Redis 版本信息</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents"/>
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control"/>
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#redis发布周期">Redis发布周期</a></li>
    <li><a href="#版本兼容">版本兼容</a></li>
    <li><a href="#版本说明">版本说明</a>
      <ul>
        <li><a href="#redis-60">Redis 6.0</a></li>
        <li><a href="#redis-50">Redis 5.0</a></li>
        <li><a href="#redis-40">Redis 4.0</a></li>
        <li><a href="#redis-32">Redis 3.2</a></li>
        <li><a href="#redis-30">Redis 3.0</a></li>
        <li><a href="#redis-28">Redis 2.8</a></li>
        <li><a href="#redis-26">Redis 2.6</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      


<link rel="stylesheet" href=""/>

<link rel="stylesheet" href="/js/audiojs/custom.css"/>


<article class="markdown">
  <h1>
    <a href="/posts/redis/redis-version/">Redis 版本信息</a>
  </h1>
  

<div>

  <h5>January 2, 2020</h5>



  
  <div>
    
        <a href="/categories/develop/">develop</a>, 
        <a href="/categories/redis/">redis</a>
  </div>
  

  
  <div>
    
        <a href="/tags/redis/">redis</a>
  </div>
  


</div>


  <p></p><p>本文介绍 Redis发布周期, 版本兼容和版本特性说明</p>
<h1 id="redis发布周期">Redis发布周期</h1>
<p>Redis 作为系统软件，被各个系统广泛使用，升级会有一定成本，因此发布周期都比较长。</p>
<ul>
<li>unstable</li>
<li>development</li>
<li>frozen</li>
<li>release candidate</li>
<li>stable</li>
</ul>
<h1 id="版本兼容">版本兼容</h1>
<p>Redis 尽量向后兼容，比如 2.8 通常向 2.6.x 兼容， 跨版本 2.4 则可能有问题。</p>
<p>在主从配置中，虽然建议是 主从都是用相同的redis 版本，
但是实际使用中， 低版本的的主 2.6 通常可以接上 高版本的从 2.8;<br/>
而高版本的主2.8 接上 低版本的从 2.6 可能有问题。</p>
<h1 id="版本说明">版本说明</h1>
<h2 id="redis-60">Redis 6.0</h2>
<p>Redis 6在许多关键领域改进了Redis，并且是最大的领域之一，在此仅列出此版本的最大功能：</p>
<ul>
<li>模块系统现在允许开发者使用新API，比如:<br/>
将任意模块私有数据存储在RDB文件中，处理不同服务器事件，捕获和重写命令执行，阻止客户端key等</li>
<li>Redis重写了过期key的周期，可更快地收回过期key</li>
<li>Redis全面支持SSL<br/>
Redis现在在所有通道上都支持SSL</li>
<li>支持ACL<br/>
可以指定某些用户只能运行某些命令或者访问某些数据结构</li>
<li>Redis提供了名为<code>RESP3</code>的新协议，该协议可返回更多语义答复<br/>
客户端可以得到更明确的返回类型，客户端需要更新以支持此协议</li>
<li>服务器端支持键值的客户端缓存。<br/>
这个该功能仍处于试验阶段，接下来的版本会有新的迭代，更多信息 https://redis.io/topics/client-side-caching</li>
<li>Redis现在可以选择使用多线程来处理I/O，（最大128个线程）<br/>
在单个实例中，每秒能共提供2倍的操作，但 <code>pipeline</code> 无法使用此功能</li>
<li>无硬盘复制现在支持从库，<br/>
Redis版本2.8.18是支持无盘复制的第一个版本，支持主库直接同步，
现在则支持子进程直接在从库将RDB通过线路发送到从属设备，而不使用磁盘作为中间存储</li>
<li>Redis-benchmark 现在开始支持 Redis Cluster 模式</li>
<li>SRANDMEMBER 和其他相似的命令，有更好的随机性</li>
<li>改进了 Redis-cli 客户端</li>
<li>重写了 Systemd support</li>
<li>发布了 Redis Cluster 的代理服务<br/>
<a href="https://github.com/artix75/redis-cluster-proxy">https://github.com/artix75/redis-cluster-proxy</a></li>
<li>发布了 新的Redis module ： Disque，内存中的分布式作业队列<br/>
<a href="https://github.com/antirez/disque-module">https://github.com/antirez/disque-module</a></li>
</ul>
<h2 id="redis-50">Redis 5.0</h2>
<p>Redis 5是专注于一些重要功能的发行版。 而Redis 4非常专注于操作，<br/>
Redis 5的更改大部分是面向用户的，在现有数据基础上实施新的数据类型和操作类型。
以下是此版本的主要功能：</p>
<ul>
<li>支持 Stream 类型. <a href="https://redis.io/topics/streams-intro">https://redis.io/topics/streams-intro</a></li>
<li>增加 Redis Module API：计时器，集群和字典 API</li>
<li>RDB 存储 LFU and LRU 信息</li>
<li>将集群管理器从Ruby（redis-trib.rb）由C改写，<code>redis-cli --cluster help</code> 查询更多帮助信息</li>
<li>sorted set 增加新操作命令: ZPOPMIN/ZPOPMAX （ blocking variants todo 未知）</li>
<li>升级碎片整理 version 2</li>
<li>HyperLogLog 优化底层实现</li>
<li>更好的内存报告功能。</li>
<li>子命令支持 HELP</li>
<li>client 终端经常连接和断开会有更好的性能体现</li>
<li>修复若干bug，随机功能的性能提升</li>
<li>内存管理 Jemalloc 升级版本到 5.1</li>
<li><code>CLIENT UNBLOCK and CLIENT ID</code></li>
<li>添加 LOLWUT 功能（计算机美学，实际开发可能用不上） <a href="http://antirez.com/news/123">http://antirez.com/news/123</a></li>
<li>如果不是为了向后API兼容，Redis将不再使用“slave”一词</li>
<li>网络层中的Differnet优化</li>
<li>Lua的改进：
<ul>
<li>更好地将Lua脚本传输到 Slave(从库) / AOF(AOF追加操作落地)</li>
<li>Lua脚本现在可以超时，并且处于<code>BUSY</code>状态的从库也支持</li>
</ul>
</li>
<li>动态HZ，以平衡空闲CPU使用率和响应速度，<br/>
hz理解为后台任务占用cpu资源</li>
<li>Redis核心在许多方面得到了重构和改进</li>
</ul>
<h2 id="redis-40">Redis 4.0</h2>
<h2 id="redis-32">Redis 3.2</h2>
<h2 id="redis-30">Redis 3.0</h2>
<h2 id="redis-28">Redis 2.8</h2>
<ul>
<li>
<p>现在，从站可以与主站部分重新同步，因此大多数情况下，当短短时间断开主从链接时，不需要与主端RDB创建完全重新同步</p>
</li>
<li>
<p>支持 IPv6 （实验性功能）</p>
</li>
<li>
<p>从站现在可以显式ping主机，主机可以独立检测超时的从站</p>
</li>
<li>
<p>可以设置如果没有连接足够多具有给定最大延迟的从站，则主站可以停止接受写操作</p>
</li>
<li>
<p>键空间通过发布/订阅更改通</p>
</li>
<li>
<p>CONFIG SET maxclients 现在可使用命令设置最大连接数</p>
</li>
<li>
<p>可以绑定多个ip地址</p>
</li>
<li>
<p>设置 进程</p>
</li>
<li>
<p>设置进程名称，以便您可以在“ ps”命令输出中识别实例的侦听端口，或者该实例是正在保存的子实例</p>
</li>
<li>
<p>崩溃时自动检查内存</p>
</li>
<li>
<p>CONFIG REWRITE可以将使用CONFIG SET操作的配置更改具体化到redis.conf文件中</p>
</li>
<li>
<p>NetBSD 更友好的代码库</p>
</li>
<li>
<p>PUBSUB命令用于发布/订阅自省功能， 列出相关信息，</p>
</li>
<li>
<p>现在可以照原样复制 EVALSHA，而无需为复制链接扩展到完整的EVAL LUA脚本(??)</p>
</li>
<li>
<p>更好的Lua脚本错误报告</p>
</li>
<li>
<p>SDIFF性能提升</p>
</li>
<li>
<p>实验特性： 无盘复制 <a href="http://redis.io/topics/replication">http://redis.io/topics/replication</a></p>
</li>
<li>
<p>增加 SCAN, SSCAN, HSCAN, ZSCAN 命令</p>
</li>
<li>
<p>AOF 如果硬盘不够，则不会 异常退出，并且在硬盘足够的情况下，能够继续正常工作</p>
</li>
<li>
<p>增加 BITPOS: find first bit set or clear in a bitmap.</p>
</li>
<li>
<p>Redis-cli更新为使用SCAN而不是通过以下方式RANDOMKEY 进行随机采样</p>
</li>
<li>
<p>提升6倍 info 的速度</p>
</li>
<li>
<p>Jemalloc updated to 3.6.0</p>
</li>
<li>
<p>截断的 AOF 也可以重新加载</p>
</li>
</ul>
<h2 id="redis-26">Redis 2.6</h2>
<ul>
<li>服务器端支持Lua脚本，请参阅http://redis.io/commands/eval</li>
<li>虚拟内存已删除（在2.4中已弃用）</li>
<li>删除了最大客户端数的硬编码限制，</li>
<li>AOF低级语义通常更为理智，尤其是在使用 Slaves</li>
<li>增加毫秒级的过期策略，相关命令为 PEXPIRE, PTTL</li>
<li>lists, ziplists hashes 小规模使用该类数据结构存储小数字，可以更好的利用内存</li>
<li>从库支持只读功能</li>
<li>新的 BIT 操作：BITCOUNT 和 BITOP</li>
<li>客户端最大输出缓冲区的软硬限制。您可以为不同类别的客户端（普通，pubsub，从库）指定不同的限制</li>
<li>更多增量（较少阻塞）的过期密钥收集算法，实际上，这意味着当大量密钥大约同时过期时，Redis的响应速度更快。</li>
<li>AOF 能够使用可变参数命令重写聚合数据类型，通常可以生成一个更易于保存，加载且尺寸更小的AOF</li>
<li>现在，每个redis.conf指令都可以作为redis-server二进制文件的命令行选项使用，并且具有相同的名称和参数数量。</li>
<li>散列表种子随机化，以防止冲突攻击。</li>
<li>将大型对象写入Redis时，性能得到改善</li>
<li>集成内存测试，请参阅redis-server –test-memory</li>
<li>新增 INCRBYFLOAT and HINCRBYFLOAT 命令</li>
<li>新的DUMP，RESTORE，MIGRATE命令（从Redis Cluster移植回2.6）</li>
<li>RDB文件中的CRC64 Checksump</li>
<li>MONITOR 有更好的输出和行为（现在在执行之前已记录命令）</li>
<li>Watchdog “看门狗”可调试延迟，慢日志等 CONFIG SET watchdog-period 500</li>
<li>重构或重写了核心的重要部分。新的内部API和核心更改允许在新代码的基础上开发Redis Cluster，但是对于2.6，所有集群代码均已删除，并且将在Redis 3.0更加完整和稳定时与Redis 3.0一起发布。</li>
<li>Redis 启动画面增加 ASCII logo</li>
<li>关于内存违规或失败的断言的崩溃报告得到了显着改进，从而使难以捕获的错误的调试更加简单。</li>
<li>redis-benchmark 提升: 能够运行选定的测试，CSV输出，更快，更好的帮助</li>
<li>redis-cli改进：–eval用于舒适地开发Lua脚本</li>
<li>SHUTDOWN 现在支持两个可选参数：“SAVE”和“ NOSAVE”</li>
<li>INFO输出分为多个部分，该命令现在仅能显示特定的部分</li>
<li>有关命令被调用多少时间以及使用了多少执行时间的新统计信息: info commandstats</li>
<li>在边缘情况下更可预测的SORT行为。</li>
<li>更好地支持大字节序和*BSD系统</li>
<li>改进了构建系统</li>
</ul><p></p>
</article>

<script src="/js/audiojs/audio.min.js"></script>
<script src="/js/audiojs/custom.js"></script>


<script src=""></script>


<script src=""></script>


 

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
  
  <div class="book-comments">

</div>
  
 
      </footer>
      
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#redis发布周期">Redis发布周期</a></li>
    <li><a href="#版本兼容">版本兼容</a></li>
    <li><a href="#版本说明">版本说明</a>
      <ul>
        <li><a href="#redis-60">Redis 6.0</a></li>
        <li><a href="#redis-50">Redis 5.0</a></li>
        <li><a href="#redis-40">Redis 4.0</a></li>
        <li><a href="#redis-32">Redis 3.2</a></li>
        <li><a href="#redis-30">Redis 3.0</a></li>
        <li><a href="#redis-28">Redis 2.8</a></li>
        <li><a href="#redis-26">Redis 2.6</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  















</body></html>